import './style.css';

class Producto {
	constructor(
		imagen,
		precio,
		precioAnterior,
		cantidadVendidos,
		calificacion,
		titulo,
		tieneEnvioGratis
	) {
		this.imagen = imagen;
		this.precio = precio;
		this.precioAnterior = precioAnterior;
		this.cantidadVendidos = cantidadVendidos;
		this.calificacion = calificacion;
		this.titulo = titulo;
		this.tieneEnvioGratis = tieneEnvioGratis;
	}

	obtenerResumen() {
		return {
			imagen: this.imagen,
			precio: this.precio,
			precioAnterior: this.precioAnterior,
			cantidadVendidos: this.cantidadVendidos,
			calificacion: this.calificacion,
			titulo: this.titulo,
			tieneEnvioGratis: this.tieneEnvioGratis,
		};
	}

	modificarImagen(nuevaImagen) {
		this.imagen = nuevaImagen;
	}

	modificarPrecio(nuevoPrecio) {
		this.precioAnterior = this.precio;
		this.precio = nuevoPrecio;
	}

	aumentarCantidadVendidos() {
		this.cantidadVendidos = this.cantidadVendidos + 1;
	}

	modificarTitulo(nuevoTitulo) {
		this.titulo = nuevoTitulo;
	}

	modificarTipoDeEnvio() {
		this.tieneEnvioGratis = !this.tieneEnvioGratis;
	}
}

const producto = new Producto(
	'https://picsum.photos/400',
	6.99,
	12.99,
	500,
	4.8,
	'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
	false
);

//
const productos = [
	// Una fila
	[
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
	],

	// Otra fila
	[
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
	],

	// Otra fila
	[
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
	],

	// Otra fila
	[
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
		{
			imagen: 'https://picsum.photos/400',
			precio: 6.99,
			precioAnterior: 12.99,
			cantidadVendidos: 500,
			calificacion: 4.8,
			titulo:
				'Gafas de sol modernas para usarlas en la playa con protección contra rayos UV',
			tieneEnvioGratis: false,
		},
	],
];

function $(elemento) {
	return document.querySelector(elemento);
}

const container = $('.container');

function construirGrilla() {
	let resultado = '';

	for (let i = 0; i < productos.length; i++) {
		const noEsPrimeraFila = i > 0;

		const filaDeProductos = productos[i];
		const fila = document.createElement('div');
		fila.className = noEsPrimeraFila ? `row mt-4` : `row`;

		for (let j = 0; j < filaDeProductos.length; j++) {
			const producto = filaDeProductos[j];
			const col = document.createElement('div');
			col.className = 'col-md-2';
			const productoContainer = document.createElement('a');
			productoContainer.href = '#';
			productoContainer.className = 'rounded producto-container shadow-sm';
			const imagen = document.createElement('img');
			imagen.className = 'producto-imagen';
			imagen.src = `${producto.imagen}?${i}-${j}`;
			imagen.alt = 'Imagen de Producto';
			const productoItem = document.createElement('div');
			productoItem.className = 'producto-item p-2';

			// Precio
			const precioDiv = document.createElement('div');
			const precioMoneda = document.createElement('span');
			precioMoneda.className = 'fs-6 fw-semibold';
			precioMoneda.textContent = 'PEN';
			const precioActual = document.createElement('span');
			precioActual.className = 'fw-bold fs-4';
			precioActual.textContent = producto.precio;
			const precioAnterior = document.createElement('span');
			precioAnterior.className =
				'text-body-tertiary text-decoration-line-through';
			precioAnterior.textContent = 'PEN ' + producto.precioAnterior;
			precioDiv.appendChild(precioMoneda);
			precioDiv.appendChild(precioActual);
			precioDiv.appendChild(precioAnterior);

			// Cantidad vendidos y calificación
			const infoDiv = document.createElement('div');
			const cantidadVendidos = document.createElement('span');
			cantidadVendidos.className = 'text-secondary';
			cantidadVendidos.textContent = producto.cantidadVendidos + '+ vendido(s)';
			const calificacion = document.createElement('span');
			calificacion.className = 'text-secondary';
			calificacion.style.marginLeft = '5px';
			calificacion.textContent = '★ ' + producto.calificacion;
			infoDiv.appendChild(cantidadVendidos);
			infoDiv.appendChild(calificacion);

			// Título del producto
			const titulo = document.createElement('h2');
			titulo.className = 'text-truncate producto-name h6';
			titulo.style.maxWidth = '180px';
			titulo.title = producto.titulo;
			titulo.textContent = producto.titulo;

			// Envío gratis
			const envioGratis = document.createElement('span');
			envioGratis.className = 'producto-envio';
			envioGratis.textContent = 'Envío gratis';

			productoItem.appendChild(precioDiv);
			productoItem.appendChild(infoDiv);
			productoItem.appendChild(titulo);
			productoItem.appendChild(envioGratis);

			productoContainer.appendChild(imagen);
			productoContainer.appendChild(productoItem);
			col.appendChild(productoContainer);
			fila.appendChild(col);
		}

		resultado += fila.outerHTML;
	}

	return resultado;
}

container.innerHTML = construirGrilla();
